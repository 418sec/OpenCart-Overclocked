/*
 Ajax Search v1.0.2 | @villagedefrance | Overclocked Edition | GNU GPL3 Licensed
*/
function doLiveSearch(a,b){return 38==a.keyCode||40==a.keyCode?!1:($("#livesearch").remove(),updown=-1,""==b||b.length<2?!1:(b=encodeURIComponent(b),$.ajax({url:$("base").attr("href")+"index.php?route=product/search/livesearch&keyword="+b,dataType:"json",content:this,success:function(a){if(a.length>0){var c,d,e,b=document.createElement("ul");b.id="livesearch";for(var f in a)c=document.createElement("li"),e=document.createElement("a"),$(function(){d=document.createElement("img"),$(d).load(function(){$(this).show()}),d.src=a[f].image,e.appendChild(d)}),e.appendChild(document.createTextNode(a[f].name)),e.href="undefined"!=typeof a[f].href?a[f].href:$("#hidden").attr("href")+"index.php?route=product/product&product_id="+a[f].product_id,c.appendChild(e),b.appendChild(c);$("#livesearch").length>0&&$("#livesearch").remove(),$("#search").append(b)}}}),!0))}function upDownEvent(a){var b=document.getElementById("livesearch");if(b){var c=b.childNodes.length-1;if(-1!=updown&&"undefined"!=typeof b.childNodes[updown]&&$(b.childNodes[updown]).removeClass("highlighted"),38==a.keyCode?updown=updown>0?--updown:updown:40==a.keyCode&&(updown=updown<c?++updown:updown),updown>=0&&updown<=c){$(b.childNodes[updown]).addClass("highlighted");var d=b.childNodes[updown].childNodes[0].text;"undefined"==typeof d&&(d=b.childNodes[updown].childNodes[0].innerText),$("#search").find("[name='search']").first().val(new String(d).replace(/(\s\(.*?\))$/,""))}}return!1}var updown=-1;$(document).ready(function(){$("#search").find("[name='search']").first().keyup(function(a){doLiveSearch(a,this.value)}).focus(function(a){doLiveSearch(a,this.value)}).keydown(function(a){upDownEvent(a)}).blur(function(){window.setTimeout("$('#livesearch').hide(); updown=0;",400)}),$(document).bind("keydown",function(a){try{13==a.keyCode&&$(".highlighted").length>0&&(document.location.href=$(".highlighted").find("a").first().attr("href"))}catch(b){}})});
